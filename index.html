
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ ì»¤ìŠ¤í…€ ìˆ˜ë°• ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        canvas { border: 2px solid #333; border-radius: 10px; background: #fff; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let fruits = [];
        let currentFruit = null;
        let gameRunning = true;
        let gamePaused = false;
        let score = 0;
        let mouseX = canvas.width / 2;
        let customImages = [];
        let imagesLoaded = 0;

        const fruitConfig = Array.from({ length: 11 }, (_, i) => ({
            size: 20 + i * 5,
            color: '#'+Math.floor(Math.random()*16777215).toString(16),
            name: `Fruit${i+1}`,
            file: `fruit${i+1}.jpg`
        }));

        function loadCustomImages() {
            const totalImages = fruitConfig.length;

            fruitConfig.forEach((config, index) => {
                const img = new Image();
                img.onload = function () {
                    customImages[index] = img;
                    imagesLoaded++;
                };
                img.onerror = function () {
                    imagesLoaded++;
                };
                img.src = `images/${config.file}`;
            });
        }

        class Fruit {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type;
                this.size = fruitConfig[type].size;
                this.vx = 0;
                this.vy = 0;
                this.onGround = false;
            }

            update() {
                if (!this.onGround) {
                    this.vy += 0.3;
                    this.y += this.vy;
                    this.x += this.vx;

                    if (this.y + this.size >= canvas.height) {
                        this.y = canvas.height - this.size;
                        this.vy = 0;
                        this.onGround = true;
                    }
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                if (customImages[this.type]) {
                    ctx.drawImage(customImages[this.type], -this.size, -this.size, this.size * 2, this.size * 2);
                } else {
                    ctx.fillStyle = fruitConfig[this.type].color;
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.restore();
            }
        }

        function createNextFruit() {
            const nextFruitType = Math.floor(Math.random() * 5);
            currentFruit = new Fruit(mouseX, 50, nextFruitType);
        }

        function dropFruit() {
            if (currentFruit && gameRunning && !gamePaused) {
                currentFruit.vy = 2;
                fruits.push(currentFruit);
                createNextFruit();
            }
        }

        function gameLoop() {
            if (!gameRunning || gamePaused) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            fruits.forEach(fruit => {
                fruit.update();
                fruit.draw();
            });
            if (currentFruit) {
                currentFruit.x = mouseX;
                currentFruit.draw();
            }
            requestAnimationFrame(gameLoop);
        }

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
        });

        canvas.addEventListener('click', dropFruit);
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                dropFruit();
            }
        });

        // ê²Œì„ ì‹œì‘
        loadCustomImages();
        createNextFruit();
        gameLoop();
    </script>
</body>
</html>
